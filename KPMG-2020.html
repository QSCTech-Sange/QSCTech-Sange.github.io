<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>计算机视觉：图片中的表格区域提取——2020 毕马威商赛复盘 | 三个技术小站</title><meta name="description" content="虽然商赛没晋级，但还是学到了不少CV的知识，这里整理一下。"><meta name="keywords" content="计算机视觉,RNN,CV,深度学习,毕马威,目标检测"><meta name="author" content="杨宇昊"><meta name="copyright" content="杨宇昊"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/red_shark.webp"><link rel="canonical" href="https://qsctech-sange.github.io/KPMG-2020.html"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin="crossorigin"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="ykFGsmFH8M0zGBTxnp6wJbCxJCcrr-5_xEd74sfqA6s"/><meta name="msvalidate.01" content="B9612ADF0D9A92F7A76CC3705B2645F6"/><meta name="360-site-verification" content="4417b2a102039ff12038fca1701a3618"/><meta name="yandex-verification" content="{&quot;enable&quot;:true,&quot;main&quot;:&quot;#49B1F5&quot;,&quot;paginator&quot;:&quot;#00c4b6&quot;,&quot;button_hover&quot;:&quot;#FF7242&quot;,&quot;text_selection&quot;:&quot;#00c4b6&quot;,&quot;link_color&quot;:&quot;#99a9bf&quot;,&quot;meta_color&quot;:&quot;#858585&quot;,&quot;hr_color&quot;:&quot;#A4D8FA&quot;,&quot;code_foreground&quot;:&quot;#F47466&quot;,&quot;code_background&quot;:&quot;rgba(27, 31, 35, .05)&quot;,&quot;toc_color&quot;:&quot;#00c4b6&quot;,&quot;blockquote_padding_color&quot;:&quot;#49b1f5&quot;,&quot;blockquote_background_color&quot;:&quot;#49b1f5&quot;}"/><meta property="og:type" content="article"><meta property="og:title" content="计算机视觉：图片中的表格区域提取——2020 毕马威商赛复盘"><meta property="og:url" content="https://qsctech-sange.github.io/KPMG-2020.html"><meta property="og:site_name" content="三个技术小站"><meta property="og:description" content="虽然商赛没晋级，但还是学到了不少CV的知识，这里整理一下。"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-COVER"><meta property="article:published_time" content="2020-01-29T02:24:06.000Z"><meta property="article:modified_time" content="2020-01-29T11:21:17.601Z"><meta name="twitter:card" content="summary"><link rel="manifest" href="/image/pwa/manifest.json"/><meta name="theme-color" content="#fff"/><meta name="msapplication-TileColor" content="#fff"/><link rel="apple-touch-icon" sizes="180x180" href="/image/pwa/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/image/pwa/32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/image/pwa/16.png"/><link rel="mask-icon" href="/image/pwa/safari-pinned-tab.svg" color="#5bbad5"/><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = '1'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-1684591464347392',
  enable_page_level_ads: 'true'
});</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?bbe3106fee7fc090c2fbe9fa14e2ea91";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=156936411-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', '156936411-1');
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '5.0.2',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"距离上次更新已经过去了","messageNext":"天，文章内容可能已经过时。"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: {"limitCount":50,"languages":{"author":"作者: 杨宇昊","link":"链接: ","source":"来源: 三个技术小站","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: false,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: true    
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2020-01-29 19:21:17'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img {
  opacity: 1
}
</style></noscript></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/red_shark.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">241</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">67</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">17</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div id="body-wrap"><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%80%89%E9%A2%98"><span class="toc-number">1.</span> <span class="toc-text"> 选题</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E6%9E%84%E5%BB%BA"><span class="toc-number">1.1.</span> <span class="toc-text"> 知识图谱构建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9C%80%E6%B1%82%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.1.</span> <span class="toc-text"> 需求概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1"><span class="toc-number">1.1.2.</span> <span class="toc-text"> 什么是知识图谱</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E6%A0%BC%E6%A3%80%E6%B5%8B"><span class="toc-number">1.2.</span> <span class="toc-text"> 表格检测</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9C%80%E6%B1%82%E6%A6%82%E8%BF%B0-2"><span class="toc-number">1.2.1.</span> <span class="toc-text"> 需求概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%84%E4%BB%B7%E6%8C%87%E6%A0%87"><span class="toc-number">1.2.2.</span> <span class="toc-text"> 评价指标</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%88%91%E4%BB%AC%E7%9A%84%E9%80%89%E6%8B%A9"><span class="toc-number">1.3.</span> <span class="toc-text"> 我们的选择</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%A1%E9%A2%98"><span class="toc-number">2.</span> <span class="toc-text"> 审题</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%80%9D%E8%B7%AF"><span class="toc-number">3.</span> <span class="toc-text"> 思路</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AE%97%E6%B3%95%E6%A8%A1%E5%9E%8B"><span class="toc-number">4.</span> <span class="toc-text"> 算法模型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BA%E6%96%87%E6%96%B9%E5%90%91"><span class="toc-number">4.1.</span> <span class="toc-text"> 论文方向</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E7%BB%BC%E8%BF%B0"><span class="toc-number">4.2.</span> <span class="toc-text"> 简单综述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%83%8C%E6%99%AF"><span class="toc-number">4.2.1.</span> <span class="toc-text"> 背景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E7%9A%84%E5%8F%91%E5%B1%95"><span class="toc-number">4.2.2.</span> <span class="toc-text"> 卷积神经网络的发展</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2014-%E5%B9%B4r-cnn-%E9%A6%96%E6%AC%A1%E5%B0%86-cnn-%E7%94%A8%E4%BA%8E%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B"><span class="toc-number">4.2.2.1.</span> <span class="toc-text"> 2014 年：R-CNN - 首次将 CNN 用于目标检测</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%90%86%E8%A7%A3-r-cnn"><span class="toc-number">4.2.2.1.1.</span> <span class="toc-text"> 理解 R-CNN</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8F%90%E5%8D%87%E8%BE%B9%E7%95%8C%E6%A1%86"><span class="toc-number">4.2.2.1.2.</span> <span class="toc-text"> 提升边界框</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">4.2.2.1.3.</span> <span class="toc-text"> 总结</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2015-fast-r-cnn-%E5%8A%A0%E9%80%9F%E5%92%8C%E7%AE%80%E5%8C%96-r-cnn"><span class="toc-number">4.2.2.2.</span> <span class="toc-text"> 2015： Fast R-CNN - 加速和简化 R-CNN</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#fast-r-cnn-%E8%A7%81%E8%A7%A3-1roi%E5%85%B4%E8%B6%A3%E5%8C%BA%E5%9F%9F%E6%B1%A0%E5%8C%96"><span class="toc-number">4.2.2.2.1.</span> <span class="toc-text"> Fast R-CNN 见解 1：ROI（兴趣区域）池化</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#fast-r-cnn-%E8%A7%81%E8%A7%A3-2%E5%B0%86%E6%89%80%E6%9C%89%E6%A8%A1%E5%9E%8B%E5%B9%B6%E5%85%A5%E4%B8%80%E4%B8%AA%E7%BD%91%E7%BB%9C"><span class="toc-number">4.2.2.2.2.</span> <span class="toc-text"> Fast R-CNN 见解 2：将所有模型并入一个网络</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2016faster-r-cnn%E5%8A%A0%E9%80%9F%E5%8C%BA%E5%9F%9F%E6%8F%90%E6%A1%88"><span class="toc-number">4.2.2.3.</span> <span class="toc-text"> 2016：Faster R-CNN—加速区域提案</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E7%94%9F%E6%88%90%E5%8C%BA%E5%9F%9F"><span class="toc-number">4.2.2.3.1.</span> <span class="toc-text"> 如何生成区域</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2017mask-r-cnn-%E6%89%A9%E5%B1%95-faster-r-cnn-%E4%BB%A5%E7%94%A8%E4%BA%8E%E5%83%8F%E7%B4%A0%E7%BA%A7%E5%88%86%E5%89%B2"><span class="toc-number">4.2.2.4.</span> <span class="toc-text"> 2017：Mask R-CNN - 扩展 Faster R-CNN 以用于像素级分割</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#roialign%E9%87%8D%E5%AF%B9%E9%BD%90-roipool-%E4%BB%A5%E4%BD%BF%E5%85%B6%E6%9B%B4%E5%87%86%E7%A1%AE"><span class="toc-number">4.2.2.4.0.1.</span> <span class="toc-text"> RoiAlign——重对齐 RoIPool 以使其更准确</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%95%E6%9C%9B"><span class="toc-number">4.2.2.5.</span> <span class="toc-text"> 展望</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E6%88%98%E6%A1%86%E6%9E%B6"><span class="toc-number">5.</span> <span class="toc-text"> 实战框架</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE"><span class="toc-number">5.1.</span> <span class="toc-text"> 数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#github"><span class="toc-number">5.1.1.</span> <span class="toc-text"> Github</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%97%E5%A4%A7%E7%8E%8B%E9%80%89%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A0%94%E7%A9%B6%E9%99%A2"><span class="toc-number">5.1.2.</span> <span class="toc-text"> 北大王选计算机研究院</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%86%E6%9E%B6"><span class="toc-number">5.2.</span> <span class="toc-text"> 框架</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%84%E5%A4%84%E7%90%86"><span class="toc-number">5.2.1.</span> <span class="toc-text"> 预处理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%8B%E8%BD%AC"><span class="toc-number">5.2.1.1.</span> <span class="toc-text"> 旋转</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%99%8D%E5%99%AA"><span class="toc-number">5.2.1.2.</span> <span class="toc-text"> 降噪</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%86%A8%E8%83%80"><span class="toc-number">5.2.1.3.</span> <span class="toc-text"> 膨胀</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E5%80%BC%E5%8C%96"><span class="toc-number">5.2.1.4.</span> <span class="toc-text"> 二值化</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0"><span class="toc-number">5.2.2.</span> <span class="toc-text"> 深度学习</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E5%89%B2%E6%95%B0%E6%8D%AE"><span class="toc-number">5.2.2.1.</span> <span class="toc-text"> 分割数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E8%AE%AD%E7%BB%83%E5%8F%82%E6%95%B0"><span class="toc-number">5.2.2.2.</span> <span class="toc-text"> 设置训练参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%A7%8B%E8%B7%91%E6%A8%A1%E5%9E%8B"><span class="toc-number">5.2.2.3.</span> <span class="toc-text"> 开始跑模型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%9E%8B%E5%88%86%E6%9E%90"><span class="toc-number">5.2.2.4.</span> <span class="toc-text"> 模型分析</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ppt-%E5%B1%95%E7%A4%BA"><span class="toc-number">6.</span> <span class="toc-text"> PPT 展示</span></a></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-cover)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">三个技术小站</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">计算机视觉：图片中的表格区域提取——2020 毕马威商赛复盘</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-01-29T02:24:06.000Z" title="发表于 2020-01-29 10:24:06">2020-01-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-01-29T11:21:17.601Z" title="更新于 2020-01-29 19:21:17">2020-01-29</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/">计算机视觉</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">7.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>23分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/KPMG-2020#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/KPMG-2020" itemprop="commentCount"></span></a></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><blockquote>
<p>和两位计算机大二的同学，一位大二金融数学，一位大四食品科学的同学参加了 2020 年毕马威商赛，虽然商赛没晋级，但还是学到了不少 CV 的知识，这里整理一下。大家都是 CV 领域的萌新，所以也是重在参与吧。</p>
</blockquote>
<h1 id="选题"><a class="markdownIt-Anchor" href="#选题"></a> 选题</h1>
<p>这次毕马威商赛比较特殊，时长两周，同时给了 <strong>两个</strong> 题目。一道是「知识图谱构建」，一道是「无边框表格的区域识别」。完整题目如下：</p>
<h2 id="知识图谱构建"><a class="markdownIt-Anchor" href="#知识图谱构建"></a> 知识图谱构建</h2>
<p>构建行业知识图谱(行业不限,金融,法务,审计等),主要包括,1)知识抽取:从不同知识源(尤其是非结构化数据)抽取实体、属性、关系、事件等;2)知识表示:一种计算机可以接受的用于描述知识的数据结构。</p>
<h3 id="需求概述"><a class="markdownIt-Anchor" href="#需求概述"></a> 需求概述</h3>
<p>尽管人工智能依靠机器学习和深度学习取得了快速进展,但这些都是弱人工智能,对于机器的训练,需要人类的监督以及大量的数据来喂养,更有甚者需要人手动对数据进行标记,对于强人工智能而言,这是不可取的。要实现真正的类人智能,机器需要掌握大量的常识性知识,以人的思维模式和知识结构来进行语言理解、视觉场景解析和决策分析。</p>
<h3 id="什么是知识图谱"><a class="markdownIt-Anchor" href="#什么是知识图谱"></a> 什么是知识图谱</h3>
<p>知识图谱又称为科学知识图谱,在图书情报界称为知识域可视化,或知识领域映射地图,用来显示知识发展进程与结构关系的一系列各种不同的图形,用可视化技术描述知识资源及载体,挖掘、分析、构建、绘制和显示知识及他们互相之间的关系。(百度百科定义)<br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KnowledgeGraph" alt="KnowledgeGraph" /><br />
例如:天眼查、企查查的企业知识图谱,数据包括:企业基础数据、投资关系、任职关系、企业专利数据、企业招标数据、企业招聘数据、企业诉讼数据、企业失信数据、企业新闻数据;利用知识图谱融合以上数据,制作企业知识图谱,并在企业知识图谱之上利用图谱特性,针对金融业务场景制定一系列策略。</p>
<h2 id="表格检测"><a class="markdownIt-Anchor" href="#表格检测"></a> 表格检测</h2>
<p>解析图像内无表格线的表格(或者表格线缺失的表格),并记录下每个表格 4 个顶点的坐标。</p>
<h3 id="需求概述-2"><a class="markdownIt-Anchor" href="#需求概述-2"></a> 需求概述</h3>
<p>目前针对各类报告(如财报等)的解读、检验等工作多为人工完成,费时费效。我们希望可以通过图像识别技术自动化此流程,将文件中的表格数据进行抽取、整合,提高服务效率。</p>
<p>由于报告中除了表格还包含了文本、图表、logo 等。因此为实现表格数据的抽取流程,首先需要从每页文文件中检测出表格区域。以便针对表格区域进行后续的识别流程。</p>
<p>如下图所示,文檔中的每一页转化为图像格式,并将其输入到表格检测模型中根据训练的参数得到每个表格 4 个顶点的坐标,从而确定表格的具体位置。样例中为方便展示,将顶点信息在原图中进行连线,绘制出表格区域,实际比赛中输出为各顶点坐标。</p>
<h3 id="评价指标"><a class="markdownIt-Anchor" href="#评价指标"></a> 评价指标</h3>
<p>主要重点关心预测的召回率和精确度。精确度使用 iou 进行评判。<br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/TableDetectionExample" alt="TableDetectionExample" /></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/TableDetectionExample2" alt="TableDetectionExample2" /></p>
<p>IoU :交并比(Intersection over Union),计算 “预测的边框” 和 “真实的边框” 的交集和并集的比值。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/IoU" alt="IoU" /></p>
<h2 id="我们的选择"><a class="markdownIt-Anchor" href="#我们的选择"></a> 我们的选择</h2>
<p>说实话感觉主办方对于出题有点随意，不太实际。在很多选手对题目提出审核标准的质疑的时候，往往也是回答要「商业分析」之类的。感觉主办方想往技术转型但是没有落实好。以往商赛就是商业分析，比拼 PPT 的内容完善和精美程度。但是一个技术型的比赛不给出具体的审核标准和规则是不合理的。</p>
<p>对于题目一，要求确实给的比较抽象，只是介绍了什么是「知识图谱」，对于要做什么没有说明，只知道是做「知识图谱」。</p>
<p>考虑到这个因素，我们选择了题目二，即「无边框表格的区域识别」。要求是给定图片，从中找到「表格」，提取出四个顶点坐标。利用真实坐标围成的区域和我们算法给出的坐标围成的区域计算交并比来衡量准确率。这个任务目标相对比较具体。这个相当于一个算法竞赛。</p>
<h1 id="审题"><a class="markdownIt-Anchor" href="#审题"></a> 审题</h1>
<p>第二题的思路比较明确，我们需要设计一个算法，使得输入是一张图片，输出是四个点坐标。含义是表格的四个顶点。</p>
<p>那么图片是什么样的图片呢？图片是直接对书本等资料拍摄还是 <code>.pdf</code> 格式截图的图片？根据观察题目意思和例子，我们判断应该是后者。这简化了我们的赛题难度。根据对例子的观察，应该是中英文都要有。</p>
<p>但是，不同于 <code>Kaggle</code>，<code>天池</code> 等竞赛平台，这次的竞赛没有一个格式规范，甚至没有一个测试集。所以测试的好不好完全就是参赛选手可以随意发挥的。我说我的交并比是 100% 那就是 100%，反正你没有测试集可以给我跑。这是非常致命的很严重的问题，一个比算法的赛题不能以算法作为衡量标准。最后其实就回落到比拼 PPT 的精美程度，而完全没有办法衡量算法怎么样。</p>
<p>这也是我觉得我们没有进入决赛的很关键的一点，我们把重心放在了打磨算法上，而没有在 PPT 美化或者说和“商业案例分析”结合。应该说，这是我们审题的一个重大失误。</p>
<h1 id="思路"><a class="markdownIt-Anchor" href="#思路"></a> 思路</h1>
<p>审题后开始定方向，首先传统的利用 <code>opencv</code> 处理图像，直接找空白、对齐等特征来检测表格位置很直观，但是感觉不够“高大上”而且找特征其实也挺麻烦的，于是我们直接敲定了使用「深度学习」来做。</p>
<p>这里插一句，其实在 <code>Stackoverflow</code> 上能找到现成的使用 <code>opencv</code> 提取表格位置的代码，挺简单但是效果我觉得其实也还行。</p>
<p>那么怎么利用「深度学习」呢？首先我们的分工是先去找论文和一些入门资料来看。</p>
<h1 id="算法模型"><a class="markdownIt-Anchor" href="#算法模型"></a> 算法模型</h1>
<p>我们的赛题属于「计算机视觉」中的「目标检测」。</p>
<h2 id="论文方向"><a class="markdownIt-Anchor" href="#论文方向"></a> 论文方向</h2>
<p>在研究了一些资料后，我们收集了很多论文。以「Table Detection」为关键词，可以得到很多篇论文。不过，它们大多聚焦于「表格检测」而不是「无边框表格检测」。而且，这些论文通常比较晦涩难懂。</p>
<p>比较突破的是我们发现了 <code>ICDAR 2019</code>  这个会议的主题正好有「表格检测」，而且又是 2019 年的比赛，非常新，让我们狂喜。找其中的论文，发现正好有专注于「无边框表格检测」的论文「A GAN-based Feature Generator for Table Detection」，再次狂喜。这应该是学术界最前沿的「无边框表格检测」的论文，搞定了这篇，岂不是稳赢了？</p>
<p>然而这篇还没发表，只列在了网站上的<a target="_blank" rel="noopener" href="http://icdar2019.org/list-of-accepted-papers/">接受论文</a>里。但是我们没有放弃，通过搜索作者，我们发现他们是北京大学王选计算机研究所的团队。于是团队成员向他们发邮件，成功搞到了这篇文献，并且获取到了微信号。</p>
<p>可是他们不提供数据和代码（这要求是有点过了），只给了论文。无奈我们一行人都是萌新，实在是看不懂，不太能用的上。但这个发邮件联系作者套论文的操作还是挺有意思的经历，哈哈！</p>
<h2 id="简单综述"><a class="markdownIt-Anchor" href="#简单综述"></a> 简单综述</h2>
<p>参照 Dhruv Parthasarathy 在 Athelas 发表的文章和机器之心的翻译，经过了大量的学习后，我们简单理一下「计算机视觉」的发展脉络。</p>
<h3 id="背景"><a class="markdownIt-Anchor" href="#背景"></a> 背景</h3>
<p>自从 Alex Krizhevsky、Geoff Hinton 和 Ilya Sutskever 在 2012 年赢得了 ImageNet 的冠军，卷积神经网络就成为了分割图像的黄金准则。事实上，从那时起，卷积神经网络不断获得完善，并已在 ImageNet 挑战上超越人类。<br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/ImageNet" alt="现在，卷积神经网络在 ImageNet 的表现已超越人类。图中 y 轴代表 ImageNet 错误率。" /><br />
虽然这些结果令人印象深刻，但与真实的人类视觉理解的多样性和复杂性相比，图像分类还是简单得多。<br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/ImagNet-Example" alt="分类挑战赛使用的图像实例。注意图像的构图以及对象的唯一性。" /><br />
在分类中，图像的焦点通常是一个单一目标，任务即是对图像进行简单描述（见上文）。但是当我们在观察周遭世界时，我们处理的任务相对复杂的多。<br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/ImageNet-realworld" alt="现实中的情景通常由许多不同的互相重叠的目标、背景以及行为构成。" /><br />
我们看到的情景包含多个互相重叠的目标以及不同的背景，并且我们不仅要分类这些不同的目标还要识别其边界、差异以及彼此的关系！<br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/ImageNet-realworld-task" alt="在图像分割中，我们的目的是对图像中的不同目标进行分类，并确定其边界。来源：Mask R-CNN " /><br />
卷积神经网络可以帮我们处理如此复杂的任务吗？也就是说，给定一个更为复杂的图像，我们是否可以使用卷积神经网络识别图像中不同的物体及其边界？事实上，正如 Ross Girshick 和其同事在过去几年所做的那样，答案毫无疑问是肯定的。</p>
<h3 id="卷积神经网络的发展"><a class="markdownIt-Anchor" href="#卷积神经网络的发展"></a> 卷积神经网络的发展</h3>
<p>在本文中，我们将介绍目标检测和分割的某些主流技术背后的直观知识，并了解其演变历程。具体来说，我们将介绍 R-CNN（区域 CNN），卷积神经网络在这个问题上的最初的应用，及变体 Fast R-CNN 和 Faster R-CNN。最后，我们将介绍 Facebook Research 最近发布的一篇文章 Mask R-CNN，它扩展了这种对象检测技术从而可以实现像素级分割。上述四篇论文的链接如下：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://arxiv.org/abs/1311.2524">R-CNN</a></li>
<li><a target="_blank" rel="noopener" href="https://arxiv.org/abs/1504.08083">Fast R-CNN</a></li>
<li><a target="_blank" rel="noopener" href="https://arxiv.org/abs/1506.01497">Faster R-CNN</a></li>
<li><a target="_blank" rel="noopener" href="https://arxiv.org/abs/1703.06870">Mask R-CNN</a></li>
</ol>
<h4 id="2014-年r-cnn-首次将-cnn-用于目标检测"><a class="markdownIt-Anchor" href="#2014-年r-cnn-首次将-cnn-用于目标检测"></a> 2014 年：R-CNN - 首次将 CNN 用于目标检测</h4>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/R-CNN" alt="目标检测算法，比如 R-CNN，可分析图像并识别主要对象的位置和类别。" /></p>
<p>受到多伦多大学 Hinton 实验室的研究的启发，加州伯克利大学一个由 Jitendra Malik 领导的小组，问了他们自己一个在今天看来似乎是不可避免的问题：</p>
<blockquote>
<p>Krizhevsky et. al 的研究成果可在何种程度上被推广至目标检测？</p>
</blockquote>
<p>目标检测是一种找到图像中的不同目标并进行分类的任务（如上图所示）。通过在 PASCAL VOC Challenge 测试（一个知名的对象检测挑战赛，类似于 ImageNet），由 Ross Girshick（将在下文细讲）、Jeff Donahue 和 Trevor Darrel 组成的团队发现这个问题确实可通过 Krizhevsky 的研究结果获得解决。他们写道：</p>
<blockquote>
<p>Krizhevsky et. al 第一次提出：相比基于更简单、HOG 般的特征的系统，卷及神经网络可显著提升 PASCAL VOC 上的目标检测性能。</p>
</blockquote>
<p>现在让我们花点时间来了解他们的架构 R-CNN 的运作的方式。</p>
<h5 id="理解-r-cnn"><a class="markdownIt-Anchor" href="#理解-r-cnn"></a> 理解 R-CNN</h5>
<p>R-CNN 的目的为接收图像，并正确识别图像中主要目标（通过边界框）的位置。</p>
<ul>
<li>输入：图像</li>
<li>输出：边界框+图像中每个目标的标注</li>
</ul>
<p>但是我们如何找出这些边界框的位置？R-CNN 做了我们也可以直观做到的——在图像中假设了一系列边界，看它们是否可以真的对应一个目标。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/R-CNN-edge" alt="通过多个尺度的窗口选择性搜索，并搜寻共享纹理、颜色或强度的相邻像素。图片来源：https：//www.koen.me/research/pub/uijlings-ijcv2013-draft.pdf" /></p>
<p>R-CNN 创造了这些边界框，或者区域提案（region proposal）关于这个被称为选择性搜索（Selective Search）的方法，可在<a target="_blank" rel="noopener" href="http://www.cs.cornell.edu/courses/cs7670/2014sp/slides/VisionSeminar14.pdf">这里</a> 阅读更多信息。在高级别中，选择性搜索（如上图所示）通过不同尺寸的窗口查看图像，并且对于不同尺寸，其尝试通过纹理、颜色或强度将相邻像素归类，以识别物体。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/Alex-Net" alt="在创建一组区域提案（region proposal）后，R-CNN 只需将图像传递给修改版的 AlexNet 以确定其是否为有效区域。" /></p>
<p>一旦创建了这些提案，R-CNN 简单地将该区域卷曲到一个标准的平方尺寸，并将其传递给修改版的 AlexNet（ImageNet 2012 的冠军版本，其启发了 R-CNN），如上所示。</p>
<p>在 CNN 的最后一层，R-CNN 添加了一个支持向量机（SVM），它可以简单地界定物体是否为目标，以及是什么目标。这是上图中的第 4 步。</p>
<h5 id="提升边界框"><a class="markdownIt-Anchor" href="#提升边界框"></a> 提升边界框</h5>
<p>现在，在边界框里找到了目标，我们可以收紧边框以适应目标的真实尺寸吗？我们的确可以这样做，这也是 R-CNN 的最后一步。R-CNN 在区域提案上运行简单的线性回归，以生成更紧密的边界框坐标从而获得最终结果。下面是这一回归模型的输入和输出：</p>
<ul>
<li>
<p>输入：对应于目标的图像子区域</p>
</li>
<li>
<p>输出：子区域中目标的新边界框坐标</p>
</li>
</ul>
<h5 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h5>
<p>所以，概括一下，R-CNN 只是以下几个简单的步骤</p>
<ol>
<li>为边界框生成一组提案。</li>
<li>通过预训练的 AlexNet 运行边界框中的图像，最后通过 SVM 来查看框中图像的目标是什么。</li>
<li>通过线性回归模型运行边框，一旦目标完成分类，输出边框的更紧密的坐标。</li>
</ol>
<h4 id="2015-fast-r-cnn-加速和简化-r-cnn"><a class="markdownIt-Anchor" href="#2015-fast-r-cnn-加速和简化-r-cnn"></a> 2015： Fast R-CNN - 加速和简化 R-CNN</h4>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/Ross-Girchick" alt="Ross Girshick 编写了 R-CNN 和 Fast R-CNN，并持续推动着 Facebook Research 在计算机视觉方面的进展。" /></p>
<p>R-CNN 性能很棒，但是因为下述原因运行很慢：</p>
<ol>
<li>它需要 CNN（AlexNet）针对每个单图像的每个区域提案进行前向传递（每个图像大约 2000 次向前传递）。</li>
<li>它必须分别训练三个不同的模型 - CNN 生成图像特征，预测类别的分类器和收紧边界框的回归模型。这使得传递（pipeline）难以训练。</li>
</ol>
<p>2015 年，R-CNN 的第一作者 Ross Girshick 解决了这两个问题，并创造了第二个算法——Fast R-CNN。下面是其主要思想。</p>
<h5 id="fast-r-cnn-见解-1roi兴趣区域池化"><a class="markdownIt-Anchor" href="#fast-r-cnn-见解-1roi兴趣区域池化"></a> Fast R-CNN 见解 1：ROI（兴趣区域）池化</h5>
<p>对于 CNN 的前向传递，Girshick 意识到，对于每个图像，很多提出的图像区域总是相互重叠，使得我们一遍又一遍地重复进行 CNN 计算（大约 2000 次！）。他的想法很简单：为什么不让每个图像只运行一次 CNN，然后找到一种在 2000 个提案中共享计算的方法？</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/Faster-RCNN" alt="在 ROIPool 中，创建了图像的完整前向传递，并从获得的前向传递中提取每个兴趣区域的转换特征。来源：CS231N 幻灯片，Fei Fei Li、Andrei Karpathy、和 Justin Johnson 斯坦福大学" /></p>
<p>这正是 Fast R-CNN 使用被称为 RoIPool（兴趣区域池化）的技术所完成的事情。其要点在于，RoIPool 分享了 CNN 在图像子区域的前向传递。在上图中，请注意如何通过从 CNN 的特征映射选择相应的区域来获取每个区域的 CNN 特征。然后，每个区域的特征简单地池化（通常使用最大池化（Max Pooling））。所以我们所需要的是原始图像的一次传递，而非大约 2000 次！</p>
<h5 id="fast-r-cnn-见解-2将所有模型并入一个网络"><a class="markdownIt-Anchor" href="#fast-r-cnn-见解-2将所有模型并入一个网络"></a> Fast R-CNN 见解 2：将所有模型并入一个网络</h5>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/Faster-RCNN-joint" alt="Fast R-CNN 将卷积神经网络（CNN），分类器和边界框回归器组合为一个简单的网络。" /><br />
Fast R-CNN 的第二个见解是在单一模型中联合训练卷积神经网络、分类器和边界框回归器。之前我们有不同的模型来提取图像特征（CNN），分类（SVM）和紧缩边界框（回归器），而 Fast R-CNN 使用单一网络计算上述三个模型。</p>
<p>在上述图像中，你可以看到这些工作是如何完成的。Fast R-CNN 在 CNN 顶部用简单的 softmax 层代替了支持向量机分类器（SVM classfier）以输出分类。它还添加了与 softmax 层平行的线性回归层以输出边界框坐标。这样，所有需要的输出均来自一个单一网络！下面是整个模型的输入和输出：</p>
<ul>
<li>输入：带有区域提案的图像</li>
<li>输出：带有更紧密边界框的每个区域的目标分类</li>
</ul>
<h4 id="2016faster-r-cnn加速区域提案"><a class="markdownIt-Anchor" href="#2016faster-r-cnn加速区域提案"></a> 2016：Faster R-CNN—加速区域提案</h4>
<p>即使有了这些进步，Faster R-CNN 中仍存在一个瓶颈问题——区域提案器（region proposer）。正如我们所知，检测目标位置的第一步是产生一系列的潜在边界框或者供测试的兴趣区域。在 Fast R-CNN，通过使用选择性搜索创建这些提案，这是一个相当缓慢的过程，被认为是整个流程的瓶颈。<br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/sun-jian" alt="微软研究院首席研究员孙剑领导了 Faster R-CNN 团队。" /></p>
<p>2015 年中期，由 Shaoqing Ren、Kaiming He、Ross Girshick 和孙剑组成的微软研究团队，找到了一种被其命为 Faster R-CNN 的架构，几乎把区域生成步骤的成本降为零。</p>
<p>Faster R-CNN 的洞见是，区域提案取决于通过 CNN 的前向（forward pass）计算（分类的第一步）的图像特征。为什么不重复使用区域提案的相同的 CNN 结果，以取代单独运行选择性搜索算法？</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/faster-RCNN-general" alt="在 Faster R-CNN，单个 CNN 用于区域提案和分类。" /></p>
<p>事实上，这正是 Faster R-CNN 团队取得的成就。上图中你可以看到单个 CNN 如何执行区域提案和分类。这样一来，只需训练一个 CNN，我们几乎就可以免费获得区域提案！作者写道：</p>
<blockquote>
<p>我们观察到，区域检测器（如 Fast R-CNN）使用的卷积特征映射也可用于生成区域提案 [从而使区域提案的成本几乎为零]。</p>
</blockquote>
<p>以下是其模型的输入和输出：</p>
<ul>
<li>输入：图像（注意并不需要区域提案）。</li>
<li>输出：图像中目标的分类和边界框坐标。</li>
</ul>
<h5 id="如何生成区域"><a class="markdownIt-Anchor" href="#如何生成区域"></a> 如何生成区域</h5>
<p>让我们花点时间看看 Faster R-CNN 如何从 CNN 特征生成这些区域提案。Faster R-CNN 在 CNN 特征的顶部添加了一个简单的完全卷积网络，创建了所谓的区域提案网络。<br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/faster-RCNN-conv" alt="区域提案网络在 CNN 的特征上滑动一个窗口。在每个窗口位置，网络在每个锚点输出一个分值和一个边界框（因此，4k 个框坐标，其中 k 是锚点的数量）。" /></p>
<p>区域生成网络的工作是在 CNN 特征映射上传递滑动窗口，并在每个窗口中输出 k 个潜在边界框和分值，以便评估这些框有多好。这些 k 框表征什么？</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/faster-RCNN-human" alt="我们知道，用于人的边框往往是水平和垂直的。我们可以使用这种直觉，通过创建这样维度的锚点来指导区域提案网络。" /></p>
<p>我们知道图像中的目标应该符合某些常见的纵横比和尺寸。例如，我们想要一些类似人类形状的矩形框。同样，我们不会看到很多非常窄的边界框。以这种方式，我们创建 k 这样的常用纵横比，称之为锚点框。对于每个这样的锚点框，我们在图像中每个位置输出一个边界框和分值。</p>
<p>考虑到这些锚点框，我们来看看区域提案网络的输入和输出：</p>
<ul>
<li>输入：CNN 特征图。</li>
<li>输出：每个锚点的边界框。分值表征边界框中的图像作为目标的可能性。</li>
</ul>
<p>然后，我们仅将每个可能成为目标的边界框传递到 Fast R-CNN，生成分类和收紧边界框。</p>
<h4 id="2017mask-r-cnn-扩展-faster-r-cnn-以用于像素级分割"><a class="markdownIt-Anchor" href="#2017mask-r-cnn-扩展-faster-r-cnn-以用于像素级分割"></a> 2017：Mask R-CNN - 扩展 Faster R-CNN 以用于像素级分割</h4>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/mask-RCNN" alt="图像实例分割的目的是在像素级场景中识别不同目标。" /></p>
<p>到目前为止，我们已经懂得如何以许多有趣的方式使用 CNN，以有效地定位图像中带有边框的不同目标。</p>
<p>我们能进一步扩展这些技术，定位每个目标的精确像素，而非仅限于边框吗？这个问题被称为图像分割。Kaiming He 和一群研究人员，包括 Girshick，在 Facebook AI 上使用一种称为 Mask R-CNN 的架构探索了这一图像分割问题。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/Kaiming-he" alt="Facebook AI 的研究员 Kaiming He 是 Mask R-CNN 的主要作者，也是 Faster R-CNN 的联合作者。" /></p>
<p>很像 Fast R-CNN 和 Faster R-CNN，Mask R-CNN 的基本原理非常简单直观。鉴于 Faster R-CNN 目标检测的效果非常好，我们能将其简单地扩展到像素级分割吗？</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/Mask-RCNN-FCN" alt="在 Mask R-CNN 中，在 Faster R-CNN 的 CNN 特征的顶部添加了一个简单的完全卷积网络（FCN），以生成 mask（分割输出）。请注意它是如何与 Faster R-CNN 的分类和边界框回归网络并行的。" /></p>
<p>Mask R-CNN 通过简单地向 Faster R-CNN 添加一个分支来输出二进制 mask，以说明给定像素是否是目标的一部分。如上所述，分支（在上图中为白色）仅仅是 CNN 特征图上的简单的全卷积网络。以下是其输入和输出：</p>
<ul>
<li>输入：CNN 特征图。</li>
<li>输出：在像素属于目标的所有位置上都有 1s 的矩阵，其他位置为 0s（这称为二进制 mask）。</li>
</ul>
<p>但 Mask R-CNN 作者不得不进行一个小的调整，使这个流程按预期工作。</p>
<h6 id="roialign重对齐-roipool-以使其更准确"><a class="markdownIt-Anchor" href="#roialign重对齐-roipool-以使其更准确"></a> RoiAlign——重对齐 RoIPool 以使其更准确</h6>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/Mask-RCNN-RoiAlighn" alt="图像通过 RoIAlign 而不是 RoIPool 传递，使由 RoIPool 选择的特征图区域更精确地对应原始图像的区域。这是必要的，因为像素级分割需要比边界框更细粒度的对齐。" /></p>
<p>当运行没有修改的原始 Faster R-CNN 架构时，Mask R-CNN 作者意识到 RoIPool 选择的特征图的区域与原始图像的区域略不对齐。因为图像分割需要像素级特异性，不像边框，这自然地导致不准确。</p>
<p>作者通过使用 RoIAlign 方法简单地调整 RoIPool 来更精确地对齐，从而解决了这个问题。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/mask-RCNN-RoiPool" alt="我们如何准确地将原始图像的相关区域映射到特征图上？" /></p>
<p>想象一下，我们有一个尺寸大小为 128x128 的图像和大小为 25x25 的特征图。想象一下，我们想要的是与原始图像中左上方 15x15 像素对应的区域（见上文）。我们如何从特征图选择这些像素？</p>
<p>我们知道原始图像中的每个像素对应于原始图像中的〜25/128 像素。要从原始图像中选择 15 像素，我们只需选择 15 * 25/128〜=2.93 像素。</p>
<p>在 RoIPool，我们会舍弃一些，只选择 2 个像素，导致轻微的错位。然而，在 RoIAlign，我们避免了这样的舍弃。相反，我们使用双线性插值来准确得到 2.93 像素的内容。这很大程度上，让我们避免了由 RoIPool 造成的错位。</p>
<p>一旦这些掩码生成，Mask R-CNN 简单地将它们与来自 Faster R-CNN 的分类和边界框组合，以产生如此惊人的精确分割：</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/mask-rcnn-precise" alt="Mask R-CNN 也能对图像中的目标进行分割和分类。" /></p>
<h4 id="展望"><a class="markdownIt-Anchor" href="#展望"></a> 展望</h4>
<p>在过去短短 3 年里，我们看到研究界如何从 Krizhevsky 等人最初结果发展为 R-CNN，最后一路成为 Mask R-CNN 的强大结果。单独来看，像 MASK R-CNN 这样的结果似乎是无法达到的惊人飞跃。然而，通过这篇文章，我希望你们认识到，通过多年的辛勤工作和协作，这些进步实际上是直观的且渐进的改进之路。R-CNN、Fast R-CNN、Faster R-CNN 和最终的 Mask R-CNN 提出的每个想法并不一定是跨越式发展，但是它们的总和却带来了非常显著的效果，帮助我们向人类水平的视觉能力又前进了几步。</p>
<p>特别令我兴奋的是，R-CNN 和 Mask R-CNN 间隔只有三年！随着持续的资金、关注和支持，计算机视觉在未来三年会有怎样的发展？我们非常期待。</p>
<h1 id="实战框架"><a class="markdownIt-Anchor" href="#实战框架"></a> 实战框架</h1>
<h2 id="数据"><a class="markdownIt-Anchor" href="#数据"></a> 数据</h2>
<p>数据从哪儿找？怎么标注格式？</p>
<h3 id="github"><a class="markdownIt-Anchor" href="#github"></a> Github</h3>
<p>我们首先从 Github 上找到了<a target="_blank" rel="noopener" href="https://github.com/sgrpanchal31/table-detection-dataset">资源</a>，里面有 400+ 张图片，并且是标注好的数据，以 <code>.csv</code> 的格式。这个数据集的优先是可以直接拿来用，缺点是样本太少，只有 400+ 张，同时缺少中文数据。</p>
<p>我们也找过 <code>ICADR 2019</code> 的比赛数据，可是里面的图片是直接拍的，不是 <code>.pdf</code> 导出的，和我们的需求差异挺大的。还有好多数据集也是这个问题。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/cTDaR_t00011" alt="ICDAR的数据集，感受一下" /><br />
简单了解了这些算法以后，摆在眼前的问题就是我们无法复现，除非有现成的轮子。</p>
<h3 id="北大王选计算机研究院"><a class="markdownIt-Anchor" href="#北大王选计算机研究院"></a> 北大王选计算机研究院</h3>
<p>我们又找来了了北大的 <a target="_blank" rel="noopener" href="http://www.icst.pku.edu.cn/cpdp/sjzy/index.htm">Marmot Dataset</a> 公开数据集。这个数据集包含中英文，也是扫描版的 <code>.pdf</code>，符合我们的要求。总共数量有 2000 张，这个数量级够了。不过这里的数据格式标注的比较复杂（因为原来是为了表格中内容的识别，所以也标注了表格的内容），提取表格坐标还要写个脚本 parse 一下。</p>
<p>我们将数据按照 7:2:1 来划分训练集，验证集和测试集。这些数据还是存在一些表格是有边框的，我们尽可能人工删掉了一些，但是数据集太大，无法全部都人工删除，只能稍微意思一下，所以结果是存在提升的空间的。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-Appendix-Data" alt="数据集" /></p>
<h2 id="框架"><a class="markdownIt-Anchor" href="#框架"></a> 框架</h2>
<p>我们对数据先进行预处理，然后交给深度学习的框架来跑。预处理部分我们使用<code>openCV</code>，而深度学习框架，我们选择了基于 <code>Tensorflow</code> 的 <code>luminoth</code>。</p>
<h3 id="预处理"><a class="markdownIt-Anchor" href="#预处理"></a> 预处理</h3>
<p>因为原数据其实就整挺好，所以这里的预处理其实意义不大，只是象征性地做了一下。其实案例里要求的应该是 <code>.pdf</code> 直接导出的图片格式，不过为了严谨和凑字数，我们假定可能存在从现实纸张扫描出来的数据集，因此加上了旋转，降噪这两步，但是实际上并没有用到。</p>
<h4 id="旋转"><a class="markdownIt-Anchor" href="#旋转"></a> 旋转</h4>
<p>我们假定给定的图片可能存在歪的现象，所以有拉直操作。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rotate_bound</span>(<span class="params">image, angle</span>):</span></span><br><span class="line">    (h, w) = image.shape[:<span class="number">2</span>]</span><br><span class="line">    (cX, cY) = (w // <span class="number">2</span>, h // <span class="number">2</span>)</span><br><span class="line">    M = cv2.getRotationMatrix2D((cX, cY), -angle, <span class="number">1.0</span>)</span><br><span class="line">    cos = np.abs(M[<span class="number">0</span>, <span class="number">0</span>])</span><br><span class="line">    sin = np.abs(M[<span class="number">0</span>, <span class="number">1</span>])</span><br><span class="line">    nW = int((h * sin) + (w * cos))</span><br><span class="line">    nH = h</span><br><span class="line">    M[<span class="number">0</span>, <span class="number">2</span>] += (nW / <span class="number">2</span>) - cX</span><br><span class="line">    M[<span class="number">1</span>, <span class="number">2</span>] += (nH / <span class="number">2</span>) - cY</span><br><span class="line">    <span class="keyword">return</span> cv2.warpAffine(image, M, (nW, nH),flags=cv2.INTER_CUBIC, borderMode=cv2.BORDER_REPLICATE)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_minAreaRect</span>(<span class="params">image</span>):</span></span><br><span class="line">    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)</span><br><span class="line">    gray = cv2.bitwise_not(gray)</span><br><span class="line">    thresh = cv2.threshold(gray, <span class="number">0</span>, <span class="number">255</span>,</span><br><span class="line">    cv2.THRESH_BINARY | cv2.THRESH_OTSU)[<span class="number">1</span>]</span><br><span class="line">    coords = np.column_stack(np.where(thresh &gt; <span class="number">0</span>))</span><br><span class="line">    <span class="keyword">return</span> cv2.minAreaRect(coords)</span><br><span class="line"></span><br><span class="line">image = cv2.imread(image_path)</span><br><span class="line">angle = get_minAreaRect(image)[<span class="number">-1</span>]</span><br><span class="line">rotated = rotate_bound(image, angle)</span><br></pre></td></tr></table></figure>
<h4 id="降噪"><a class="markdownIt-Anchor" href="#降噪"></a> 降噪</h4>
<p>我们假定图片存在扫描过程中的一些热噪声，需要去除。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> *</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">denoise</span>(<span class="params">im,U_init,tolerance=<span class="number">0.1</span>,tau=<span class="number">0.125</span>,tv_weight=<span class="number">100</span></span>):</span></span><br><span class="line">    m,n = im.shape</span><br><span class="line">    U = U_init</span><br><span class="line">    Px = im</span><br><span class="line">    Py = im</span><br><span class="line">    error = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> (error &gt; tolerance):</span><br><span class="line">        Uold = U</span><br><span class="line">        GradUx = roll(U,<span class="number">-1</span>,axis=<span class="number">1</span>)-U</span><br><span class="line">        GradUy = roll(U,<span class="number">-1</span>,axis=<span class="number">0</span>)-U</span><br><span class="line">        PxNew = Px + (tau/tv_weight)*GradUx</span><br><span class="line">        PyNew = Py + (tau/tv_weight)*GradUy</span><br><span class="line">        NormNew = maximum(<span class="number">1</span>,\</span><br><span class="line">        sqrt(PxNew**<span class="number">2</span>+PyNew**<span class="number">2</span>))</span><br><span class="line">        Px = PxNew/NormNew</span><br><span class="line">        Py = PyNew/NormNew</span><br><span class="line">        RxPx = roll(Px,<span class="number">1</span>,axis=<span class="number">1</span>)</span><br><span class="line">        RyPy = roll(Py,<span class="number">1</span>,axis=<span class="number">0</span>)</span><br><span class="line">        DivP = (Px-RxPx)+(Py-RyPy)</span><br><span class="line">        U = im + tv_weight*DivP</span><br><span class="line">        error = linalg.norm(U-Uold)/sqrt(n*m)</span><br><span class="line">    <span class="keyword">return</span> U,im-U</span><br></pre></td></tr></table></figure>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-warp-denoise" alt="KPMG-warp-denoise" /></p>
<h4 id="膨胀"><a class="markdownIt-Anchor" href="#膨胀"></a> 膨胀</h4>
<p>就是 Dilation，实际上就是加粗，对于我们的文字部分和边框（如果有）进行加粗，便于强调那些是特征。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">struct = cv2.getStructuringElement(cv2.MORPH_RECT, morph_size)</span><br><span class="line">cpy = cv2.dilate(~cpy, struct, anchor=(<span class="number">-1</span>, <span class="number">-1</span>), iterations=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h4 id="二值化"><a class="markdownIt-Anchor" href="#二值化"></a> 二值化</h4>
<p>其实就这一步最重要。因为我们只关心一个像素点是有东西还是没东西，一切颜色啊，深度信息啊都不重要，因此我们需要二值化，使得一个像素点只有黑和白两个信息。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pre = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)</span><br><span class="line">pre = cv2.threshold(pre, <span class="number">250</span>, <span class="number">255</span>, cv2.THRESH_BINARY | cv2.THRESH_OTSU)[<span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-Dilation-Binary" alt="KPMG-Dilation-Binary" /></p>
<h3 id="深度学习"><a class="markdownIt-Anchor" href="#深度学习"></a> 深度学习</h3>
<p>考虑到团队的 cv 经验都是 0，因此我们尽量使用现成的轮子。在这里推荐一下 <code>luminoth</code>，这个框架属实好用，还有自带的可视化分析，效果还不错。可惜已经停止维护了。</p>
<h4 id="分割数据"><a class="markdownIt-Anchor" href="#分割数据"></a> 分割数据</h4>
<p>将数据分割成训练集和验证集。里面的参数根据实际需要，做一定的修改。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lumi dataset transform --type csv --data-dir data&#x2F; --output-dir tfdata&#x2F; --split train --split val --only-classes&#x3D;table</span><br></pre></td></tr></table></figure>
<h4 id="设置训练参数"><a class="markdownIt-Anchor" href="#设置训练参数"></a> 设置训练参数</h4>
<p>我们使用的基本上就是默认的，因为不太懂 CV 的调参。这里选用了 <code>faster-RCNN</code> 作为训练的算法。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">train:</span></span><br><span class="line">  <span class="comment"># Name used to identify the run. Data inside `job_dir` will be stored under</span></span><br><span class="line">  <span class="comment"># `run_name`.</span></span><br><span class="line">  <span class="attr">run_name:</span> <span class="string">table-area-detection-0.1</span></span><br><span class="line">  <span class="comment"># Base directory in which model checkpoints &amp; summaries (for Tensorboard) will</span></span><br><span class="line">  <span class="comment"># be saved.</span></span><br><span class="line">  <span class="attr">job_dir:</span> <span class="string">jobs/</span></span><br><span class="line">  <span class="attr">save_checkpoint_secs:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">save_summaries_secs:</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Number of epochs (complete dataset batches) to run.</span></span><br><span class="line">  <span class="attr">num_epochs:</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="attr">dataset:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">object_detection</span></span><br><span class="line">  <span class="comment"># From which directory to read the dataset.</span></span><br><span class="line">  <span class="attr">dir:</span> <span class="string">tfdata/classes-table/</span></span><br><span class="line">  <span class="attr">image_preprocessing:</span></span><br><span class="line">    <span class="attr">min_size:</span> <span class="number">600</span></span><br><span class="line">    <span class="attr">max_size:</span> <span class="number">1024</span></span><br><span class="line">  <span class="attr">data_augmentation:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">flip:</span></span><br><span class="line">        <span class="attr">left_right:</span> <span class="literal">True</span></span><br><span class="line">        <span class="attr">up_down:</span> <span class="literal">True</span></span><br><span class="line">        <span class="attr">prob:</span> <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line"><span class="attr">model:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">fasterrcnn</span></span><br><span class="line">  <span class="attr">network:</span></span><br><span class="line">    <span class="comment"># Total number of classes to predict.</span></span><br><span class="line">    <span class="attr">num_classes:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>
<h4 id="开始跑模型"><a class="markdownIt-Anchor" href="#开始跑模型"></a> 开始跑模型</h4>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lumi train -c config.yml</span><br></pre></td></tr></table></figure>
<p>为了加快速度，我们找到了浙江大学超算队，把任务放到超算上跑，最后只跑了一天，速度还不错。</p>
<h4 id="模型分析"><a class="markdownIt-Anchor" href="#模型分析"></a> 模型分析</h4>
<p>使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lumi checkpoint create config.yml</span><br></pre></td></tr></table></figure>
<p>来保存模型。</p>
<p>使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lumi server web --checkpoint c2155084dca6</span><br></pre></td></tr></table></figure>
<p>可以直接打开 web server ，来放图片进去并查看检测结果，非常方便。</p>
<p>同时关于模型结果，还可以在 <code>Tensorboard</code> 上来进行可视化的分析。</p>
<p>关于 <code>luminoth</code> 的具体内容可以查看它的<a target="_blank" rel="noopener" href="https://luminoth.readthedocs.io/en/latest/">文档</a>，总结一下就是非常简单好用。</p>
<h1 id="ppt-展示"><a class="markdownIt-Anchor" href="#ppt-展示"></a> PPT 展示</h1>
<p>要求 PPT 页数有限制，最后成果是这样，没晋级，看着也就图一乐。我们按照</p>
<p>问题背景-&gt; 算法分析 -&gt; 建模流程 -&gt; 模型结果分析</p>
<p>这样的框架来写我们的 PPT。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-cover" alt="Table Detection Using Faster R-CNN" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-Agenda" alt="Agenda" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-Background" alt="Background | Charts in business analysis" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-Background2" alt="Background | Charts in financial software" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-Background3" alt="Background | Application of algorithm" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-Background4" alt="Background | Related Works" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-RNN1" alt="Algorithm | RNN" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-RNN2" alt="Algorithm | FS-RNN" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-RNN3" alt="Algorithm | FS-RNN" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-CNN" alt="Algorithm | CNN" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-Faster-RCNN" alt="Algorithm | Faster R-CNN" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-Faster-RCNN-2" alt="Algorithm | Faster R-CNN" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-Modeling" alt="Modeling | General Idea" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-warp-denoise" alt="Modeling | Preprocessing" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-Dilation-Binary" alt="Modeling | Preprocessing" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-Deep-Learning" alt="Modeling | Deep Learning" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-Result" alt="Modeling | Result Analysis" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-Loss" alt="Modeling | Training Loss Evaluation" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-results" alt="Modeling | Results Comparison" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-Future" alt="Modeling | Future Improvement" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-final" alt="Table Detection Using Faster R-CNN" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-Toolchains" alt="Appendix | Toolchains" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-Appendix-Data" alt="Appendix | Data" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-logs" alt="Appendix | Logs" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-codes" alt="Appendix | Codes" /><br />
<img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-codes2" alt="Appendix | Codes" /></p>
</div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/">计算机视觉</a><a class="post-meta__tags" href="/tags/RNN/">RNN</a><a class="post-meta__tags" href="/tags/CV/">CV</a><a class="post-meta__tags" href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a><a class="post-meta__tags" href="/tags/%E6%AF%95%E9%A9%AC%E5%A8%81/">毕马威</a><a class="post-meta__tags" href="/tags/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/">目标检测</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-COVER" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/wechat.webp" target="_blank"><img class="post-qr-code-img" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/wechat.webp" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/alipay.webp" target="_blank"><img class="post-qr-code-img" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/alipay.webp" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/LeetCode-697"><img class="prev-cover" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/LeetCode-cover.webp" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">697. 数组的度</div></div></a></div><div class="next-post pull-right"><a href="/LeetCode-451"><img class="next-cover" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/LeetCode-cover.webp" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">451. 根据字符出现频率排序</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></article></main><footer id="footer" style="background-image: url(https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/KPMG-cover)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By 杨宇昊</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">我怎么就这么菜啊！</div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script>var endLoading = function () {
  document.body.style.overflow = 'auto';
  document.getElementById('loading-box').classList.add("loaded")
}
window.addEventListener('load',endLoading)</script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    window.valine = new Valine({
      el: '#vcomment',
      appId: '4z8dfu0wvumOs1BjFBJ5jUQ3-gzGzoHsz# leancloud application app id',
      appKey: 'ikfFd8mKVK80FpjJve5nhHVF# leancloud application app key',
      placeholder: 'ヾﾉ≧∀≦)o来啊，快活啊!',
      avatar: 'monsterid',
      meta: 'nick,mail'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: true,
      path: window.location.pathname,
    });
    if ('nick,mail') { valine.config.requiredFields= 'nick,mail'.split(',') }
  }

  if (typeof Valine === 'function') initValine() 
  else $.getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js', initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) loadComment(document.querySelector('#vcomment'),loadValine)
  else setTimeout(() => loadValine(), 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><canvas class="fireworks"></canvas><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script defer="defer" id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
document.body.addEventListener('input', POWERMODE);
</script></div></body></html>