<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>&lt;Python&gt;&lt;PAT&gt; 1033 To Fill or Not to Fill | 三个技术小站</title><meta name="description" content="有一些难度的动态规划。使用循环或递归皆可。核心问题是找到最优子结构和状态转移公式。"><meta name="keywords" content="PAT,题解,动态规划,贪心算法"><meta name="author" content="杨宇昊"><meta name="copyright" content="杨宇昊"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/red_shark.webp"><link rel="canonical" href="https://qsctech-sange.github.io/1033-To-Fill-or-Not-to-Fill.html"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin="crossorigin"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="ykFGsmFH8M0zGBTxnp6wJbCxJCcrr-5_xEd74sfqA6s"/><meta name="msvalidate.01" content="B9612ADF0D9A92F7A76CC3705B2645F6"/><meta name="360-site-verification" content="4417b2a102039ff12038fca1701a3618"/><meta name="yandex-verification" content="{&quot;enable&quot;:true,&quot;main&quot;:&quot;#49B1F5&quot;,&quot;paginator&quot;:&quot;#00c4b6&quot;,&quot;button_hover&quot;:&quot;#FF7242&quot;,&quot;text_selection&quot;:&quot;#00c4b6&quot;,&quot;link_color&quot;:&quot;#99a9bf&quot;,&quot;meta_color&quot;:&quot;#858585&quot;,&quot;hr_color&quot;:&quot;#A4D8FA&quot;,&quot;code_foreground&quot;:&quot;#F47466&quot;,&quot;code_background&quot;:&quot;rgba(27, 31, 35, .05)&quot;,&quot;toc_color&quot;:&quot;#00c4b6&quot;,&quot;blockquote_padding_color&quot;:&quot;#49b1f5&quot;,&quot;blockquote_background_color&quot;:&quot;#49b1f5&quot;}"/><meta property="og:type" content="article"><meta property="og:title" content="&lt;Python&gt;&lt;PAT&gt; 1033 To Fill or Not to Fill"><meta property="og:url" content="https://qsctech-sange.github.io/1033-To-Fill-or-Not-to-Fill.html"><meta property="og:site_name" content="三个技术小站"><meta property="og:description" content="有一些难度的动态规划。使用循环或递归皆可。核心问题是找到最优子结构和状态转移公式。"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-cover.webp"><meta property="article:published_time" content="2019-08-24T08:13:18.000Z"><meta property="article:modified_time" content="2019-09-16T06:11:48.227Z"><meta name="twitter:card" content="summary"><link rel="manifest" href="/image/pwa/manifest.json"/><meta name="theme-color" content="#fff"/><meta name="msapplication-TileColor" content="#fff"/><link rel="apple-touch-icon" sizes="180x180" href="/image/pwa/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/image/pwa/32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/image/pwa/16.png"/><link rel="mask-icon" href="/image/pwa/safari-pinned-tab.svg" color="#5bbad5"/><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = '1'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-1684591464347392',
  enable_page_level_ads: 'true'
});</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?bbe3106fee7fc090c2fbe9fa14e2ea91";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=156936411-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', '156936411-1');
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '5.0.2',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"距离上次更新已经过去了","messageNext":"天，文章内容可能已经过时。"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: {"limitCount":50,"languages":{"author":"作者: 杨宇昊","link":"链接: ","source":"来源: 三个技术小站","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: false,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: true    
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2019-09-16 14:11:48'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img {
  opacity: 1
}
</style></noscript></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/red_shark.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">241</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">67</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">17</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div id="body-wrap"><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE"><span class="toc-number">1.</span> <span class="toc-text"> 题目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#input-specification"><span class="toc-number">1.0.1.</span> <span class="toc-text"> Input Specification:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#output-specification"><span class="toc-number">1.0.2.</span> <span class="toc-text"> Output Specification:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sample-input-1"><span class="toc-number">1.0.3.</span> <span class="toc-text"> Sample Input 1:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sample-output-1"><span class="toc-number">1.0.4.</span> <span class="toc-text"> Sample Output 1:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sample-input-2"><span class="toc-number">1.0.5.</span> <span class="toc-text"> Sample Input 2:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sample-output-2"><span class="toc-number">1.0.6.</span> <span class="toc-text"> Sample Output 2:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%A2%98%E8%A7%A3"><span class="toc-number">2.</span> <span class="toc-text"> 题解</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%9D%E8%B7%AF"><span class="toc-number">2.1.</span> <span class="toc-text"> 思路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">2.2.</span> <span class="toc-text"> 数据结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%97%E6%B3%95"><span class="toc-number">2.3.</span> <span class="toc-text"> 算法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81"><span class="toc-number">2.4.</span> <span class="toc-text"> 代码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3"><span class="toc-number">2.4.1.</span> <span class="toc-text"> 迭代</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%92%E5%BD%92"><span class="toc-number">2.4.2.</span> <span class="toc-text"> 递归</span></a></li></ol></li></ol></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-top.webp)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">三个技术小站</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">&lt;Python&gt;&lt;PAT&gt; 1033 To Fill or Not to Fill</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2019-08-24T08:13:18.000Z" title="发表于 2019-08-24 16:13:18">2019-08-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2019-09-16T06:11:48.227Z" title="更新于 2019-09-16 14:11:48">2019-09-16</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/PAT/">PAT</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">1.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>7分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/1033-To-Fill-or-Not-to-Fill#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/1033-To-Fill-or-Not-to-Fill" itemprop="commentCount"></span></a></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="题目"><a class="markdownIt-Anchor" href="#题目"></a> 题目</h1>
<p>With highways available, driving a car from Hangzhou to any other city is easy. But since the tank capacity of a car is limited, we have to find gas stations on the way from time to time. Different gas station may give different price. You are asked to carefully design the cheapest route to go.</p>
<h3 id="input-specification"><a class="markdownIt-Anchor" href="#input-specification"></a> Input Specification:</h3>
<p>Each input file contains one test case. For each case, the first line contains 4 positive numbers: Cmax (≤ 100), the maximum capacity of the tank; <em>D</em> (≤30000), the distance between Hangzhou and the destination city; Davg (≤20), the average distance per unit gas that the car can run; and <em>N</em> (≤ 500), the total number of gas stations. Then <em>N</em> lines follow, each contains a pair of non-negative numbers: Pi, the unit gas price, and <em>Di</em> (≤<em>D</em>), the distance between this station and Hangzhou, for <em>i</em>=1,⋯,<em>N</em>. All the numbers in a line are separated by a space.</p>
<h3 id="output-specification"><a class="markdownIt-Anchor" href="#output-specification"></a> Output Specification:</h3>
<p>For each test case, print the cheapest price in a line, accurate up to 2 decimal places. It is assumed that the tank is empty at the beginning. If it is impossible to reach the destination, print <code>The maximum travel distance = X</code> where <code>X</code> is the maximum possible distance the car can run, accurate up to 2 decimal places.</p>
<h3 id="sample-input-1"><a class="markdownIt-Anchor" href="#sample-input-1"></a> Sample Input 1:</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">50 1300 12 8</span><br><span class="line">6.00 1250</span><br><span class="line">7.00 600</span><br><span class="line">7.00 150</span><br><span class="line">7.10 0</span><br><span class="line">7.20 200</span><br><span class="line">7.50 400</span><br><span class="line">7.30 1000</span><br><span class="line">6.85 300</span><br></pre></td></tr></table></figure>
<h3 id="sample-output-1"><a class="markdownIt-Anchor" href="#sample-output-1"></a> Sample Output 1:</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">749.17</span><br></pre></td></tr></table></figure>
<h3 id="sample-input-2"><a class="markdownIt-Anchor" href="#sample-input-2"></a> Sample Input 2:</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">50 1300 12 2</span><br><span class="line">7.10 0</span><br><span class="line">7.00 600</span><br></pre></td></tr></table></figure>
<h3 id="sample-output-2"><a class="markdownIt-Anchor" href="#sample-output-2"></a> Sample Output 2:</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The maximum travel distance &#x3D; 1200.00</span><br></pre></td></tr></table></figure>
<h1 id="题解"><a class="markdownIt-Anchor" href="#题解"></a> 题解</h1>
<h2 id="思路"><a class="markdownIt-Anchor" href="#思路"></a> 思路</h2>
<ul>
<li>题目意思是，一条路上，挑选合适的加油站和加油量来使得总花费最少（每个加油站定价不同）。</li>
<li>我们先把这个问题化小，找一个最优子结构出来。</li>
<li>比方说，如果我在车站Ａ，我应该在这里加多少油？下一个车站应该去哪？</li>
<li>我首先需要看看，在我的车程范围内，有哪些加油站。</li>
<li>如果车程范围没加油站了就输出到车站Ａ的距离 + 车程</li>
<li>否则，要找到下一个要去的加油站，</li>
<li>在车程范围内，如果出现了第一个油价比这个车站低的。</li>
<li>我就加油加到正好能开到这个车站的量。</li>
<li>如果车程范围内所有的车站的油价都比现在的贵，</li>
<li>那我现在就得把车子油箱拉满，然后到车程范围内相对便宜的车站看情况补充。</li>
<li>所以当我们到那个车站的时候，可能是油箱里还有油的。</li>
<li>那么这么一来，整个结构就清晰了</li>
<li>一个状态包含
<ul>
<li>车站</li>
<li>现在油箱里的油（或者能开的最远距离，反正可以转换）</li>
<li>总价（这个也可以写在全局变量里，为了更好理解状态这个概念放在这里）</li>
</ul>
</li>
<li>而状态转移公式，就是从一个车站转移到另一个车站。转移的原则有两条
<ul>
<li>车程范围内出现的第一个油价比这个车站低的。现在油箱里的油转移为０，总价相应转换。</li>
<li>车程范围内油价都比这个车站高的情况下，选一个油价最低的，现在油箱里的油转移为满油减去到下个车站的耗费油，同时更新总价。</li>
</ul>
</li>
<li>这样就形成了从一个车站到下一个车站的状态转移</li>
<li>直到转移到终点。</li>
</ul>
<h2 id="数据结构"><a class="markdownIt-Anchor" href="#数据结构"></a> 数据结构</h2>
<ul>
<li>stations　是一个列表，表示所有加油站
<ul>
<li>下标是车站id</li>
<li>值是一个列表
<ul>
<li>第一项表示油单价</li>
<li>第二项表示到起点的距离</li>
</ul>
</li>
</ul>
</li>
<li>station或i表示现在的车站id</li>
<li>next_sta　表示下一个车站id</li>
<li>price　表示总价</li>
<li>now_tank_can_run　表示目前的油箱能开多远</li>
</ul>
<h2 id="算法"><a class="markdownIt-Anchor" href="#算法"></a> 算法</h2>
<ul>
<li>读入数据，并给车站添加一个“终点站”，其单价为０</li>
<li>车站按照离起点的距离排序</li>
<li>判断最近的车站是否距离为０，不是的话直接抛出答案（特判）</li>
<li>然后以[0,0,0]的初始状态开始进入状态转移公式（递归），三个参数分别表示，所在的站点，油箱里剩的油，和总价格
<ul>
<li>状态转移公式中</li>
<li>先判断车站是否是终点站，是的话直接跳出</li>
<li>我们需要找到下一个要去的车站
<ul>
<li>先令下一个车站为这个车站+1，判断最近的下一个车站在不在车程范围内，不在就直接跳出</li>
<li>遍历里程范围内第一个油价比车站低的车站</li>
<li>如果找到的话
<ul>
<li>设置下一个状态</li>
<li>状态的车站就是这个更低油价的车站</li>
<li>到这个车站之后，油量一定为０</li>
<li>价格要加上(到下一个车站的距离　－　现在油量能开的距离)，再乘以原来车站的单价，除以油箱数</li>
<li>将新状态放到状态转移公式</li>
</ul>
</li>
<li>如果找不到这样的车站，就找里程范围内油价最低的车站
<ul>
<li>设置下一个状态</li>
<li>这时候要把油量拉满，所以到下一个车站以后的油量为，车程 - 到下一个车站的距离</li>
<li>价格加上满油箱的油量－现在已经有的油量，乘以原来车站的单价，除以油箱数</li>
<li>将新状态放到状态转移公式</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>输出答案</li>
</ul>
<h2 id="代码"><a class="markdownIt-Anchor" href="#代码"></a> 代码</h2>
<ul>
<li>由于使用Python能够AC，所以放了Python的代码。</li>
<li>递归和迭代的方法都有写，一般来说递归可能更好理解最优子结构的概念，不过会造成更大的空间复杂度。在递归解法里，注释写得比较详细。</li>
</ul>
<h3 id="迭代"><a class="markdownIt-Anchor" href="#迭代"></a> 迭代</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">tank, distance, per_unit, num_sta = list(map(float, input().split()))</span><br><span class="line">max_dis = tank * per_unit</span><br><span class="line">stations = []</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> range(int(num_sta)):</span><br><span class="line">    info = input().split()</span><br><span class="line">    stations.append([float(info[<span class="number">0</span>]), float(info[<span class="number">1</span>])])</span><br><span class="line">stations.append([<span class="number">0</span>, distance])</span><br><span class="line">stations.sort(key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>])</span><br><span class="line"><span class="keyword">if</span> stations[<span class="number">0</span>][<span class="number">1</span>] != <span class="number">0</span>:</span><br><span class="line">    print(<span class="string">&quot;The maximum travel distance = 0.00&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    price = <span class="number">0</span></span><br><span class="line">    now_tank_can_run = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">if</span> i == num_sta:</span><br><span class="line">            print(<span class="string">&quot;%0.2f&quot;</span> % price)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        next_sta = i + <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> stations[next_sta][<span class="number">1</span>] - stations[i][<span class="number">1</span>] &gt; max_dis:</span><br><span class="line">            print(<span class="string">&quot;The maximum travel distance = %0.2f&quot;</span> % (stations[i][<span class="number">1</span>] + max_dis))</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">while</span> stations[next_sta][<span class="number">0</span>] &gt; stations[i][<span class="number">0</span>] <span class="keyword">and</span> stations[next_sta + <span class="number">1</span>][<span class="number">1</span>] - stations[i][<span class="number">1</span>] &lt;= max_dis:</span><br><span class="line">            next_sta += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> stations[next_sta][<span class="number">0</span>] &gt; stations[i][<span class="number">0</span>]:</span><br><span class="line">            next_sta = i + <span class="number">1</span></span><br><span class="line">            temp = next_sta</span><br><span class="line">            <span class="keyword">while</span> stations[temp + <span class="number">1</span>][<span class="number">1</span>] - stations[i][<span class="number">1</span>] &lt;= max_dis:</span><br><span class="line">                temp += <span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> stations[temp][<span class="number">0</span>] &lt; stations[next_sta][<span class="number">0</span>]:</span><br><span class="line">                    next_sta = temp</span><br><span class="line">            price += ((max_dis - now_tank_can_run) / per_unit * stations[i][<span class="number">0</span>])</span><br><span class="line">            now_tank_can_run = max_dis - stations[next_sta][<span class="number">1</span>] + stations[i][<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            price += ((stations[next_sta][<span class="number">1</span>] - stations[i][<span class="number">1</span>] - now_tank_can_run) / per_unit * stations[i][<span class="number">0</span>])</span><br><span class="line">            now_tank_can_run = <span class="number">0</span></span><br><span class="line">        i = next_sta</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="递归"><a class="markdownIt-Anchor" href="#递归"></a> 递归</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">next_station</span>(<span class="params">station, now_tank_can_run, price</span>):</span></span><br><span class="line">    <span class="keyword">global</span> num_sta, stations, tank, max_dis, per_unit, distance</span><br><span class="line">    <span class="keyword">if</span> station == num_sta:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span>, price</span><br><span class="line">    <span class="comment"># next_sta 先是下一个车站</span></span><br><span class="line">    next_sta = station + <span class="number">1</span></span><br><span class="line">    <span class="comment"># 如果下一个车站到这个车站的距离超过了最大能开的距离，报错</span></span><br><span class="line">    <span class="keyword">if</span> stations[next_sta][<span class="number">1</span>] - stations[station][<span class="number">1</span>] &gt; max_dis:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span>, stations[station][<span class="number">1</span>] + max_dis</span><br><span class="line">    <span class="comment"># 否则，next_sta 找到下一个要前去的车站，应当是油价比现在低的第一个车站。先遍历里程范围内的第一个油价比此车站低的车站</span></span><br><span class="line">    <span class="keyword">while</span> stations[next_sta][<span class="number">0</span>] &gt; stations[station][<span class="number">0</span>] <span class="keyword">and</span> stations[next_sta + <span class="number">1</span>][<span class="number">1</span>] - stations[station][<span class="number">1</span>] &lt;= max_dis:</span><br><span class="line">        next_sta += <span class="number">1</span></span><br><span class="line">    <span class="comment"># 如果next_sta还是比现在的价格高，说明里程范围内没有比现在更低的油价，那么就把现在的邮箱拉满，同时找到下一个里程范围内价格相对更低的车站</span></span><br><span class="line">    <span class="keyword">if</span> stations[next_sta][<span class="number">0</span>] &gt; stations[station][<span class="number">0</span>]:</span><br><span class="line">        next_sta = station + <span class="number">1</span></span><br><span class="line">        temp = next_sta</span><br><span class="line">        <span class="keyword">while</span> stations[temp + <span class="number">1</span>][<span class="number">1</span>] - stations[station][<span class="number">1</span>] &lt;= max_dis:</span><br><span class="line">            temp += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> stations[temp][<span class="number">0</span>] &lt; stations[next_sta][<span class="number">0</span>]:</span><br><span class="line">                next_sta = temp</span><br><span class="line">        <span class="keyword">return</span> next_station(next_sta, max_dis - stations[next_sta][<span class="number">1</span>] + stations[station][<span class="number">1</span>],</span><br><span class="line">                            price + (max_dis - now_tank_can_run) / per_unit * stations[station][<span class="number">0</span>])</span><br><span class="line">    <span class="comment"># 否则，正好移动到next_station为止</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> next_station(next_sta, <span class="number">0</span>,</span><br><span class="line">                            price + (stations[next_sta][<span class="number">1</span>] - stations[station][<span class="number">1</span>] - now_tank_can_run) / per_unit *</span><br><span class="line">                            stations[station][<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">tank, distance, per_unit, num_sta = list(map(float, input().split()))</span><br><span class="line">max_dis = tank * per_unit</span><br><span class="line">stations = []</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> range(int(num_sta)):</span><br><span class="line">    info = input().split()</span><br><span class="line">    stations.append([float(info[<span class="number">0</span>]), float(info[<span class="number">1</span>])])</span><br><span class="line">stations.append([<span class="number">0</span>, distance])</span><br><span class="line">stations.sort(key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>])</span><br><span class="line"><span class="keyword">if</span> stations[<span class="number">0</span>][<span class="number">1</span>] != <span class="number">0</span>:</span><br><span class="line">    print(<span class="string">&quot;The maximum travel distance = 0.00&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    status, price = next_station(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">if</span> status:</span><br><span class="line">        print(<span class="string">&quot;%0.2f&quot;</span> % price)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">&quot;The maximum travel distance = %0.2f&quot;</span> % price)</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/PAT/">PAT</a><a class="post-meta__tags" href="/tags/%E9%A2%98%E8%A7%A3/">题解</a><a class="post-meta__tags" href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">动态规划</a><a class="post-meta__tags" href="/tags/%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/">贪心算法</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-cover.webp" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/wechat.webp" target="_blank"><img class="post-qr-code-img" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/wechat.webp" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/alipay.webp" target="_blank"><img class="post-qr-code-img" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/alipay.webp" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/1034-Head-of-a-Gang"><img class="prev-cover" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-cover.webp" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">&lt;Python&gt;&lt;PAT&gt; 1034 Head of a Gang</div></div></a></div><div class="next-post pull-right"><a href="/1032-Sharing"><img class="next-cover" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-cover.webp" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">&lt;Python&gt;&lt;PAT&gt; 1032 Sharing</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/1068-Find-More-Coins.html" title="<Python><PAT> 1068 Find More Coins"><img class="relatedPosts_cover" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-cover.webp"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fas fa-history fa-fw"></i> 2020-01-25</div><div class="relatedPosts_title"><Python><PAT> 1068 Find More Coins</div></div></a></div><div class="relatedPosts_item"><a href="/1046-Shortest-Distance.html" title="<Python><PAT> 1046 Shortest Distance"><img class="relatedPosts_cover" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-cover.webp"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fas fa-history fa-fw"></i> 2020-01-25</div><div class="relatedPosts_title"><Python><PAT> 1046 Shortest Distance</div></div></a></div><div class="relatedPosts_item"><a href="/1045-Favorite-Color-Stripe.html" title="<Python><PAT> 1045 Favorite Color Stripe"><img class="relatedPosts_cover" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-cover.webp"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fas fa-history fa-fw"></i> 2019-09-16</div><div class="relatedPosts_title"><Python><PAT> 1045 Favorite Color Stripe</div></div></a></div><div class="relatedPosts_item"><a href="/1040-Longest-Symmetric-String.html" title="<Python><PAT> 1040 Longest Symmetric String"><img class="relatedPosts_cover" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-cover.webp"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fas fa-history fa-fw"></i> 2019-09-16</div><div class="relatedPosts_title"><Python><PAT> 1040 Longest Symmetric String</div></div></a></div><div class="relatedPosts_item"><a href="/1014-Waiting-in-Line.html" title="<Python><PAT> 1014 Waiting in Line"><img class="relatedPosts_cover" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-cover.webp"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fas fa-history fa-fw"></i> 2020-01-25</div><div class="relatedPosts_title"><Python><PAT> 1014 Waiting in Line</div></div></a></div><div class="relatedPosts_item"><a href="/1007-Maximum-Subsequence-Sum.html" title="<Python><PAT> 1007 Maximum Subsequence Sum"><img class="relatedPosts_cover" data-lazy-src="https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-cover.webp"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fas fa-history fa-fw"></i> 2019-09-16</div><div class="relatedPosts_title"><Python><PAT> 1007 Maximum Subsequence Sum</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></article></main><footer id="footer" style="background-image: url(https://cdn.jsdelivr.net/gh/QSCTech-Sange/picBed/PAT-top.webp)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By 杨宇昊</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">我怎么就这么菜啊！</div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script>var endLoading = function () {
  document.body.style.overflow = 'auto';
  document.getElementById('loading-box').classList.add("loaded")
}
window.addEventListener('load',endLoading)</script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    window.valine = new Valine({
      el: '#vcomment',
      appId: '4z8dfu0wvumOs1BjFBJ5jUQ3-gzGzoHsz# leancloud application app id',
      appKey: 'ikfFd8mKVK80FpjJve5nhHVF# leancloud application app key',
      placeholder: 'ヾﾉ≧∀≦)o来啊，快活啊!',
      avatar: 'monsterid',
      meta: 'nick,mail'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: true,
      path: window.location.pathname,
    });
    if ('nick,mail') { valine.config.requiredFields= 'nick,mail'.split(',') }
  }

  if (typeof Valine === 'function') initValine() 
  else $.getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js', initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) loadComment(document.querySelector('#vcomment'),loadValine)
  else setTimeout(() => loadValine(), 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><canvas class="fireworks"></canvas><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script defer="defer" id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
document.body.addEventListener('input', POWERMODE);
</script></div></body></html>